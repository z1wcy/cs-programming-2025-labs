# Составные типы данных в Python

Составные (или **коллекционные**) типы данных позволяют **хранить несколько значений** в одной переменной. Используются для хранения списков, таблиц, пар значений и других структурированных данных

Python поддерживает 4 основных составных типа:

| Тип                 | Пример             | Изменяемость   | Упорядоченность                   | Особенности                |
| ------------------- | ------------------ | -------------- | --------------------------------- | -------------------------- |
| **list (список)**   | `[1, 2, 3]`        | ✅ изменяемый   | ✅ упорядочен                      | Элементы можно менять      |
| **tuple (кортеж)**  | `(1, 2, 3)`        | ❌ неизменяемый | ✅ упорядочен                      | Быстрее списка             |
| **set (множество)** | `{1, 2, 3}`        | ✅ изменяемый   | ❌ неупорядочен                    | Только уникальные элементы |
| **dict (словарь)**  | `{"a": 1, "b": 2}` | ✅ изменяемый   | ❌ неупорядочен (в старых версиях) | Хранит пары ключ–значение  |

## Списки (`list`)

Список - это **набор элементов**, заключенных в квадратные скобки

```python
fruits = ["яблоко", "банан", "киви"]
print(fruits[0]) # доступ по индексу -> "яблоко"
```

### Добавление и удаление элементов

```python
fruits.append("груша") # добавить элемент в конец
fruits.remove("банан") # удалить элемент
print(fruits)
```

### Замена элементов

```python
numbers = [1, 2, 3]
numbers[1] = 20
print(numbers) # [1, 20, 3]
```

### Перебор списка в цикле

```python
for fruit in fruits:
    print("Фрукт:", fruit)
```

## Кортежи (`tuple`)

Кортежи похожи на списки, но **неизменяемы**

Создаются при помощи круглых скобок:

```python
colors = ("красный", "зеленый", "синий")
print(colors[1]) # "зеленый"
```

Преимущество кортежей - они занимают меньше памяти и быстрее обрабатываются

Если хотя бы один элемент в кортеже нельзя сравнить (например, число и строка), сортировка выдаст ошибку

```python
data = (3, 1, 2)
sorted_data = tuple(sorted(data))
print(sorted_data)
```

### Сравниваем tuple vs list

```python
import sys

lst = [1, 2, 3, 4, 5]
tup = (1, 2, 3, 4, 5)

print(sys.getsizeof(lst))  # размер списка в байтах
print(sys.getsizeof(tup))  # размер кортежа в байтах
```

Результат `104` и `80` (может отличаться в зависимости от версии Python, выравнивания памяти и т.п.)

```python
import timeit

print(timeit.timeit("for x in [1,2,3,4,5]: pass", number=1_000_000))
print(timeit.timeit("for x in (1,2,3,4,5): pass", number=1_000_000))
```

Результат `~0.039` и `~0.029` (зависит от оборудования, где запущен код) => tuple быстрее

## Множества (`set`)

Множество - это **неупорядоченная коллекция уникальных элементов**. Они полезны, когда важно избежать повторов

```python
numbers = {1, 2, 3, 2, 1}
print(numbers) # {1, 2, 3}
```

### Основные операции с множествами

| Операция                | Пример   | Результат                                  |
| ----------------------- | -------- | ------------------------------------------ |
| Объединение             | `a \| b` | все элементы из обоих множеств             |
| Пересечение             | `a & b`  | только общие элементы                      |
| Разность                | `a - b`  | элементы, которые есть в `a`, но нет в `b` |
| Проверка принадлежности | `x in a` | True / False                               |

Пример:

```python
a = {1, 2, 3}
b = {3, 4, 5}

print(a | b) # {1, 2, 3, 4, 5}
print(a & b) # {3}
print(a - b) # {1, 2}
```

## Словари (`dict`)

Словарь - это **набор пар ключ–значение**, заключенный в фигурные скобки.

```python
prices = {"яблоко": 100, "банан": 80, "груша": 120}
print(prices["банан"]) # 80
```

### Добавление и изменение элементов

```python
prices["киви"] = 90  # добавить новый элемент
prices["банан"] = 85 # изменить существующий
```

### Удаление элемента

```python
del prices["яблоко"]
```

### Перебор словаря

```python
for key, value in prices.items():
    print(key, "-", value)
```

## Преобразование типов

Python позволяет легко **преобразовывать** между коллекциями:

```python
# из списка в множество
nums = [1, 2, 2, 3]
unique = set(nums)

# из множества обратно в список
lst = list(unique)

# из списка пар в словарь
pairs = [("a", 1), ("b", 2)]
d = dict(pairs)
```

## Вложенные коллекции

Списки и словари можно вкладывать друг в друга:

```python
students = {
    "Анна": [5, 4, 5],
    "Иван": [3, 4, 4]
}

print(students["Анна"][1])  # 4
```

Это позволяет хранить **структурированные данные** - например, таблицы или базы данных в памяти программы

## Пример комбинирования типов

```python
products = [
    ("яблоко", 100),
    ("груша", 120),
    ("банан", 80)
]

# преобразуем в словарь
price_dict = dict(products)

# найдем товар с минимальной ценой
cheapest = min(price_dict, key=price_dict.get)
print("Самый дешевый товар:", cheapest)
```
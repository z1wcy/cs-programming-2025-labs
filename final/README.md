# Техническое задание - Система управления автозаправочной станцией

Вы работаете в российской компании "НефтеСофт", разрабатывающей программное обеспечение для автоматизации автозаправочных станций.
Вам поручено создать консольный прототип системы управления АЗС, который используется операторами и техническим персоналом станции

Система должна учитывать реальные процессы работы заправки: продажи топлива, контроль запасов, обслуживание цистерн, аварийные ситуации и ведение статистики

---

## 1. Общая идея программы

Программа представляет собой консольную систему управления автозаправочной станцией, которая позволяет:

* обслуживать клиентов (касса)
* контролировать запасы топлива
* управлять цистернами и колонками
* оформлять пополнение топлива
* вести историю операций и статистику
* обрабатывать аварийные ситуации

Программа работает в виде меню с выбором действий и функционирует в непрерывном цикле до выхода пользователя

## 2. Топливо и цистерны

### 2.1 Типы топлива

На заправке используются следующие виды топлива:

* АИ-92
* АИ-95
* АИ-98
* ДТ (дизельное топливо)

### 2.2 Цистерны

* Для одного типа топлива может существовать несколько подземных цистерн
* Каждая цистерна имеет:

  * тип топлива
  * максимальный объем
  * текущий уровень топлива
  * состояние (включена / отключена)
  * минимальный допустимый уровень

#### Важно:

* Если уровень топлива в цистерне падает ниже минимального порога:

  * цистерна автоматически отключается
  * из нее нельзя отпускать топливо
* После пополнения:

  * цистерна не включается автоматически (после пополнения топливом)
  * включение производится вручную через меню

## 3. Колонки

### 3.1 Общая схема

* На заправке есть несколько колонок
* Каждая колонка:

  * поддерживает несколько типов топлива
  * каждый тип топлива (пистолет) подключен к конкретной цистерне
* Не все колонки подключены ко всем цистернам

### 3.2 Схема заправки

* Цистерны:

  * АИ-95 №1 -> колонки 1 - 4
  * АИ-95 №2 -> колонки 5 - 8
  * АИ-92 -> колонки 1 - 6
  * АИ-98 -> колонки 3 - 6
  * ДТ -> колонки 3 - 8
* Всего колонок: 8
* Каждая колонка имеет 2 - 3 пистолета

## 4. Главное меню программы

В главном меню пользователь может выбрать одно из действий:

```text
1) Обслужить клиента (касса)
2) Проверить состояние цистерн
3) Оформить пополнение топлива
4) Баланс и статистика
5) История операций
6) Перекачка топлива между цистернами
7) Включение / отключение цистерн
8) Состояние колонок
9) EMERGENCY - аварийная ситуация
0) Выход
```

## 5. Функциональные требования

### 5.1 Обслуживание клиента (касса)

Система должна:

* принять запрос:

  * номер колонки
  * тип топлива
  * количество литров
* проверить:

  * доступность колонки
  * состояние цистерны
  * достаточность топлива
* рассчитать стоимость
* запросить подтверждение оплаты
* при подтверждении:

  * списать топливо
  * зафиксировать транзакцию
* при нехватке топлива:

  * сообщить об ошибке
  * не допустить оплату

### 5.2 Проверка состояния цистерн

Вывод информации:

* тип топлива
* текущий объем
* максимальный объем
* состояние (включена / отключена)
* предупреждения о низком уровне

### 5.3 Пополнение топлива

При прибытии бензовоза:

* выбрать тип топлива
* выбрать конкретную цистерну
* указать количество литров
* проверить, не превышает ли объем максимум
* зафиксировать операцию в истории

### 5.4 Баланс и статистика

Система должна отображать:

* общий доход
* количество обслуженных автомобилей
* сколько раз покупали каждый тип топлива
* сколько литров каждого топлива продано
* доход по каждому виду топлива

### 5.5 История операций

Вывод последних операций:

* продажи топлива
* пополнение цистерн
* перекачка топлива
* отключения и включения цистерн
* аварийные события

### 5.6 Перекачка топлива

* Перекачка возможна только между цистернами одного типа топлива
* Указывается:

  * источник
  * приемник
  * объем
* Проверяется:

  * достаточность топлива
  * вместимость целевой цистерны

### 5.7 Управление цистернами

Пользователь может:

* вручную отключать цистерны
* вручную включать цистерны (если уровень топлива достаточен)

### 5.8 Состояние колонок

Выводится информация:

* номер колонки
* какие типы топлива доступны
* к каким цистернам они подключены
* какие пистолеты временно не работают (определяется по подключенным цистернам)

### 5.9 Аварийная ситуация (Emergency)

* При подтверждении аварии:

  * все цистерны блокируются
  * заправка прекращает работу
  * фиксируется аварийное событие
  * имитируется вызов аварийных служб
* Выход из аварийного режима возможен только вручную
* При выходе из аварийного режима цистерны автоматически НЕ разблокируются

## 6. Хранение данных

Все данные обязательно сохраняются в файлах (рекомендуется JSON):

* состояние цистерн
* схема колонок
* баланс и статистика
* история операций

Перезапуск программы не должен сбрасывать состояние заправки

## 7. Пример работы программы (фрагмент)

```text
========================================
АЗС <<СеверНефть>>
Система управления заправочной станцией
========================================

ВНИМАНИЕ!
Обнаружены отключённые цистерны:
 - АИ-95 №2 (низкий уровень топлива)
 - АИ-98 №1

----------------------------------------
Выберите действие:
1) Обслужить клиента (касса)
2) Проверить состояние цистерн
3) Оформить пополнение топлива
4) Баланс и статистика
5) История операций
6) Перекачка топлива
7) Управление цистернами
8) Состояние колонок
9) EMERGENCY - аварийная ситуация
0) Выход
> 1

--- Обслуживание клиента ---

Доступные колонки:
1) Колонка 1
2) Колонка 2
3) Колонка 3
4) Колонка 4
5) Колонка 5
6) Колонка 6
7) Колонка 7
8) Колонка 8

Выберите колонку:
> 5

Колонка 5

Доступные виды топлива:
1) АИ-95 (цистерна АИ-95 №2)
2) АИ-92 (цистерна АИ-92 №1)
3) АИ-98 (цистерна АИ-98 №1)
4) ДТ    (цистерна ДТ №1)

Выберите тип топлива:
> 1

ОШИБКА:
Цистерна АИ-95 №2 отключена.
Отпуск топлива невозможен.

Нажмите Enter для возврата в меню...
```

Далее примеры сокращены (в меню всегда выводится заголовок):

```txt
----------------------------------------
Выберите действие:
> 2

--- Состояние цистерн ---

Доступные цистерны:
1) АИ-92 №1 | 12400 / 20000 л | ВКЛ
2) АИ-95 №1 | 9800 / 20000 л  | ВКЛ
3) АИ-95 №2 | 1200 / 20000 л  | ВЫКЛ (ниже порога)
3) АИ-98 №1 | 10000 / 15000 л | ВЫКЛ
4) ДТ №1    | 15600 / 25000 л | ВКЛ
```

```txt
----------------------------------------
Выберите действие:
> 7

--- Управление цистернами ---

Доступные действия:
1) Включить цистерну
2) Отключить цистерну

> 1

Цистерны, доступные для включения:
1) АИ-95 №2 | 11200 / 20000 л
2) АИ-98 №1 | 10000 / 15000 л

Выберите цистерну:
> 1

Цистерна АИ-95 №2 успешно включена.
```

```txt
----------------------------------------
Выберите действие:
> 1

--- Обслуживание клиента ---

Доступные колонки:
1) Колонка 1
2) Колонка 2
3) Колонка 3
4) Колонка 4
5) Колонка 5
6) Колонка 6
7) Колонка 7
8) Колонка 8

Выберите колонку:
> 5

Колонка 5

Доступные виды топлива:
1) АИ-95 (цистерна АИ-95 №2)
2) АИ-92 (цистерна АИ-92 №1)
3) АИ-98 (цистерна АИ-98 №1)
4) ДТ    (цистерна ДТ №1)

Выберите тип топлива:
> 1

Введите количество литров:
> 40

Стоимость:
40 л × 58.30 ₽ = 2332.00 ₽

Подтвердить оплату? (y/n)
> y

Операция выполнена успешно.
Спасибо за покупку!
```

```txt
----------------------------------------
Выберите действие:
> 4

--- Баланс и статистика ---

Обслужено автомобилей: 128
Общий доход: 484 672.00 ₽

Продано топлива:
АИ-92 - 3240 л (186 200 ₽)
АИ-95 - 4160 л (242 472 ₽)
АИ-98 - 0 л    ( 0 ₽)
ДТ    - 1980 л (56 000 ₽)
```

Строго соответствовать данному интерфейсу не обязательно. Информативность (количество выводимой информации) должна быть не ниже, чем приведенный пример

## 8. Ограничения и требования

* Программа консольная
* Работа через меню и ввод команд
* Язык программирования не ограничен
* Код должен быть структурирован и читаем